.page-header
  h1 Sighting Details 
    small #{sighting._id}
.row
  .span7
    !=partial('messages')

    script(src="http://maps.google.com/maps/api/js?sensor=false")
    script(src="/js/sighting_on_map.js")
    script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js")
    script(type="text/javascript")
      $(document).ready( function() {
        // TO FIX: WHy is jQuery not helping here?
        // var map = createMap($("#mapContainer"), $("#latitude").val(), $("#longitude").val(), 4) 

        var map = createMap(document.getElementById('mapContainer'), $("#latitude").val(), $("#longitude").val(), 4) 
        showOnMap( sighting.latitude, sighting.longitude, map )
      })

    input(type='hidden', id='latitude', value='#{sighting.latitude}')
    input(type='hidden', id='longitude', value='#{sighting.longitude}')

    div#mapContainer
    p
    ul
      li Serial: 
        = sighting.serial
      li Currency: 
        = bill.currency
      li Denomination: 
        = bill.denomination
      li Latitude: 
        = sighting.latitude
      li Longitude: 
        = sighting.longitude
      li Comment: 
        = sighting.comment
      p
      - if (everyauth.loggedIn)
        - if (sighting.submitterId == everyauth.user.id)
          a(href="#{sighting._id}/edit")
            button(class="btn primary", type="submit", value="Update") Edit
  .span3
      h3 Secondary content